(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t,a){},121:function(e,t,a){},137:function(e,t,a){},147:function(e,t,a){},149:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},159:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),o=a(13),r=a.n(o),c=a(35),s=a(32),i=a(15),m=a(10),u=a(14),d=a(191),p=a(192),g=a(193),f=a(194),E=a(195),v=a(196),b=a(197),h=(a(99),Object(n.createContext)({username:"",email:"",password:"",loginError:!1,formValid:!0,intitalLoad:!0,token:"",polls:"",errors:{username:"",email:"",password:""},handleInputChange:function(){},handleFormSubmit:function(){}})),S=function(e){var t=Object(n.useContext)(h),a=t.username,o=t.password,r=t.loginError,c=t.handleInputChange,s=t.handleFormSubmit,i={border:"solid 2px #FF647C"};return l.a.createElement(d.a,null,l.a.createElement(p.a,{onSubmit:s},l.a.createElement(g.a,{className:"jumbotron",fluid:!0},l.a.createElement(d.a,{fluid:!0},l.a.createElement("h2",{className:"colorSet"},"Sign In"),l.a.createElement("p",{className:"lead colorSet"},"Please enter your username and password"))),l.a.createElement(f.a,null,l.a.createElement(E.a,{className:"colorSet"},"Username"),l.a.createElement(v.a,{style:r?i:{border:"0"},type:"text",name:"username",placeholder:"ex. Myusername",value:a,onChange:c})),l.a.createElement(f.a,null,l.a.createElement(E.a,{className:"colorSet"},"Password"),l.a.createElement(v.a,{style:r?i:{border:"0"},type:"password",name:"password",value:o,onChange:c,placeholder:"ex. password123"})),l.a.createElement(b.a,{type:"submit",className:"btn-lg btn-dark btn-block buttonStyles",onClick:s},"Login"),l.a.createElement("p",{style:r?{marginTop:"4px",display:"block",color:"#FF647C",textAlign:"center"}:{display:"none"}},"Login Invalid, please try again"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"text-center colorSet"},l.a.createElement("p",null,"Need an account?"),l.a.createElement("a",{className:"bottomLink",href:"/signup"},"Sign Up"),l.a.createElement("a",{href:"/"},"Home"))))},C=a(20),O=a.n(C),y={getNewestPolls:function(){return O.a.get("/api/polls")},getTopPolls:function(){return O.a.get("/api/top/polls")},getCategories:function(e){return O.a.get("/api/polls/".concat(e))},getUserPolls:function(e){return O.a.get("/api/polls/user/".concat(e))},getOnePoll:function(e){return O.a.get("/api/polls/id/".concat(e))},createPoll:function(e){return O.a.post("/api/polls/",e)},updateOnePoll:function(e,t){return O.a.put("/api/polls/".concat(e),t)},deleteOnePoll:function(e){return O.a.delete("/api/polls/".concat(e))},getComments:function(){return O.a.get("/api/comments/")},getPollComments:function(e){return O.a.get("/api/comments/".concat(e))},getOneComment:function(e){return O.a.get("/api/comments/".concat(e))},createComment:function(e){return O.a.post("/api/comments/",e)},deleteOneComment:function(e){return O.a.delete("/api/comments/".concat(e))},registerUser:function(e){return O.a.post("/api/register",e)},loginUser:function(e){return O.a.post("/api/login",e)},usernameAvailable:function(e){return O.a.post("/api/username",e)},authorize:function(e){return O.a.post("/api/authorize",{},{headers:{Authorization:"Bearer "+e}})}},N=y.loginUser,k=y.authorize,j=function(e){var t=Object(n.useState)({username:"",password:"",token:"",loginError:!1}),a=Object(u.a)(t,2),o=a[0],r=a[1];return o.handleInputChange=function(e){r(Object(m.a)({},o,Object(i.a)({},e.target.name,e.target.value)))},o.handleFormSubmit=function(e){e.preventDefault(),N({username:o.username,password:o.password}).then((function(e){var t=e.data;t?(r(Object(m.a)({},o,{token:t.token})),sessionStorage.setItem("userInfo",JSON.stringify(t))):r(Object(m.a)({},o,{loginError:!0}))})).catch((function(e){console.error(e)}))},Object(n.useEffect)((function(){""!==o.token&&k(o.token).then((function(e){console.log(e),window.location.href="/explore"})).catch((function(e){console.error(e)}))}),[o.token]),l.a.createElement(h.Provider,{value:o},l.a.createElement(S,null))},w=(a(119),function(e){var t=Object(n.useContext)(h),a=t.username,o=t.email,r=t.password,c=t.errors,s=t.formValid,i=t.handleInputChange,m=t.handleFormSubmit,u={border:"solid 2px #FF647C"},S={display:"block",color:"#FF647C",fontSize:"12px"};return l.a.createElement(d.a,null,l.a.createElement(p.a,null,l.a.createElement(g.a,{className:"jumbotron",fluid:!0},l.a.createElement("h2",{className:"colorSet"},"Sign Up"),l.a.createElement("p",{className:"lead colorSet"},"Please enter your information below")),l.a.createElement(f.a,null,l.a.createElement(E.a,{className:"colorSet"},"Username"),l.a.createElement(v.a,{style:!s&&c.username?u:{border:"0"},type:"text",name:"username",value:a,onChange:i,placeholder:"ex. Myusername"}),l.a.createElement("p",{style:!s&&c.username?S:{display:"none"}},c.username)),l.a.createElement(f.a,null,l.a.createElement(E.a,{className:"colorSet"},"Email"),l.a.createElement(v.a,{style:!s&&c.email?u:{border:"0"},type:"email",name:"email",value:o,onChange:i,placeholder:"ex. johndoe@gmail.com"}),l.a.createElement("p",{style:!s&&c.email?S:{display:"none"}},c.email)),l.a.createElement(f.a,null,l.a.createElement(E.a,{className:"colorSet"},"Password"),l.a.createElement(v.a,{style:!s&&c.password?u:{border:"0"},type:"password",name:"password",value:r,onChange:i,placeholder:"ex. password123"}),l.a.createElement("p",{style:!s&&c.password?S:{display:"none"}},c.password)),l.a.createElement(b.a,{type:"submit",className:"btn-lg btn-dark btn-block buttonStyles",onClick:m},"Create Account"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"text-center colorSet"},l.a.createElement("p",null,"Already Have an Account?"),l.a.createElement("a",{className:"bottomLink",href:"/signin"},"Sign In"),l.a.createElement("a",{href:"/"},"Home"))))}),x=y.registerUser,P=y.usernameAvailable,I=y.authorize,M=function(e){var t=Object(n.useState)({username:"",email:"",password:"",formValid:!0,token:"",errors:{username:"Username is required",email:"Email is required",password:"Password is required"}}),a=Object(u.a)(t,2),o=a[0],r=a[1];return o.handleInputChange=function(e){var t=e.target,a=t.name,n=t.value,l=o.errors,c=RegExp(/^[^@\s]+@[^@\s.]+\.[^@.\s]+$/i);switch(a){case"username":l.username=n.length<5?"Username must be at least 5 characters":"";break;case"email":l.email=c.test(n)?"":"Please use a valid email";break;case"password":l.password=n.length<8?"Password must be at least 8 characters":""}r(Object(m.a)({},o,Object(i.a)({errors:l},e.target.name,e.target.value)))},o.handleFormSubmit=function(e){e.preventDefault();var t=!0;if(Object.values(o.errors).forEach((function(e){return e.length>0&&(t=!1)})),t){var a=o.errors;P({username:o.username}).then((function(e){e.data;a.username="",r(Object(m.a)({},o,{errors:a,formValid:!0})),x({username:o.username,email:o.email,password:o.password}).then((function(e){var t=e.data;r(Object(m.a)({},o,{token:t.token})),sessionStorage.setItem("userInfo",JSON.stringify(t))})).catch((function(e){return console.error(e)}))})).catch((function(e){409===e.response.status&&(a.username="Username is already in use",r(Object(m.a)({},o,{errors:a,formValid:!1})))}))}else r(Object(m.a)({},o,{formValid:!1}))},Object(n.useEffect)((function(){""!==o.token&&I(o.token).then((function(e){console.log(e),window.location.href="/explore"})).catch((function(e){console.error(e)}))}),[o.token]),l.a.createElement(h.Provider,{value:o},l.a.createElement(w,null))},Y=a(42),A=a.n(Y),D=a(202),V=a(198),F=a(217),L=a(81),H=a.n(L),T=a(44),J=a.n(T),U=(a(121),a(29)),B=a.n(U),R=a(76),_=a.n(R),q=a(77),Z=a.n(q),z=a(78),G=a.n(z),$=a(51),W=a.n($),K=a(79),Q=function(){var e=Object(n.useState)({userInfo:sessionStorage.getItem("userInfo")||"",username:"",email:"",userAvatar:""}),t=Object(u.a)(e,2),a=t[0],o=t[1];return a.logout=function(){sessionStorage.removeItem("userInfo")},Object(n.useEffect)((function(){console.log(a);var e=JSON.parse(a.userInfo);o(Object(m.a)({},a,{username:e.username,email:e.email,userAvatar:e.userAvatar}))}),[a.userInfo]),l.a.createElement(K.slide,null,l.a.createElement("div",{className:"user-avatar"},l.a.createElement("img",{alt:"User Avatar",src:a.userAvatar?a.userAvatar:B.a}),l.a.createElement("div",{className:"user-info"},l.a.createElement("h4",null,a.username),l.a.createElement("p",{className:"email"},a.email))),l.a.createElement("a",{className:"menu-item",href:"/explore"},l.a.createElement("img",{src:_.a,alt:"Compass icon"}),l.a.createElement("h5",null,"Explore"),l.a.createElement("img",{src:W.a,alt:"right chevron"})),l.a.createElement("a",{className:"menu-item",href:"/mypolls"},l.a.createElement("img",{src:Z.a,alt:"Poll icon"}),l.a.createElement("h5",null,"My Polls"),l.a.createElement("img",{src:W.a,alt:"right chevron"})),l.a.createElement("a",{className:"menu-item",href:"/createpoll"},l.a.createElement("img",{src:G.a,alt:"Create icon"}),l.a.createElement("h5",null,"Create a Poll"),l.a.createElement("img",{src:W.a,alt:"right chevron"})),l.a.createElement("a",{className:"logout",onClick:a.logout,href:"/signin"},"Logout"))},X=(a(137),function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),o=a[0],r=a[1],c=function(e){r(!o)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(V.a,{position:"static"},l.a.createElement(Q,null),l.a.createElement("img",{alt:"logo",className:"logo",src:J.a}),l.a.createElement(F.a,{"aria-label":"search",edge:"end",onClick:c,style:{marginBottom:"1rem"}},l.a.createElement(H.a,null))),l.a.createElement(D.a,{isOpen:o},l.a.createElement(d.a,{className:"buttons"},l.a.createElement("div",{className:"btnGroup"},l.a.createElement(b.a,{onClick:function(){e.updateSearch("Music"),c()},className:"category",id:"Music"},"Music"),l.a.createElement(b.a,{onClick:function(){e.updateSearch("Video Games"),c()},className:"category",id:"Video Games"},"Video Games"),l.a.createElement(b.a,{onClick:function(){e.updateSearch("Sports"),c()},className:"category",id:"Sports"},"Sports"),l.a.createElement(b.a,{onClick:function(){e.updateSearch("Other"),c()},className:"category",id:"Other"},"Other"),l.a.createElement(b.a,{onClick:function(){e.updateSearch("Movies"),c()},className:"category",id:"Movies"},"Movies"),l.a.createElement(b.a,{onClick:function(){e.updateSearch("Food"),c()},className:"category",id:"Food"},"Food")))))}),ee=(a(147),a(82)),te=a.n(ee),ae=a(49),ne=a.n(ae),le=a(19),oe=a.n(le),re=Object(n.createContext)({polls:[],selectedValue:"",searchCategory:"",comment:"",votedPolls:[],modalId:"",modal:!1,pollId:"",comments:[],poll:"",showPoll:function(){},showComments:function(){},onSelectBox:function(){},createComment:function(){},handleInputChange:function(){},updatePoll:function(){},updateSearch:function(){}}),ce=function(e){return l.a.createElement("div",{className:"pollComments"},Array.isArray(e.value)&&e.value.slice(0).reverse().map((function(e){return l.a.createElement("div",{key:e._id,className:"commentCard"},l.a.createElement("div",{className:"commentCreated"},l.a.createElement("img",{className:"commentAvatar",alt:"User Avatar",src:e.user.avatar?e.user.avatar:B.a}),l.a.createElement("h5",{className:"commentUsername"},e.user.username),l.a.createElement("h6",{className:"commentTimeStamp"},oe()().diff(oe()(e.createdAt,"YYYY-MM-DDTHH:mm:ss.SSSZ"),"minutes")>60?oe()().diff(oe()(e.createdAt,"YYYY-MM-DDTHH:mm:ss.SSSZ"),"hours")>12?oe()(e.createdAt,"YYYY-MM-DDTHH:mm:ss.SSSZ").format("MM/DD/YYYY hh:mm a"):oe()().diff(oe()(e.createdAt,"YYYY-MM-DDTHH:mm:ss.SSSZ"),"hours")+" Hours ago":oe()().diff(oe()(e.createdAt,"YYYY-MM-DDTHH:mm:ss.SSSZ"),"minutes")+" Minutes ago")),l.a.createElement("h4",{className:"commentCardComment"},e.comment))})))},se=a(218),ie=a(204),me=a(203),ue=a(89),de=a(205),pe=a(83),ge=a.n(pe),fe=a(216),Ee=function(){var e=Object(me.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:310}}}}))(),t=Object(ue.a)({palette:{primary:ge.a,secondary:{main:"#f44336"}}}),a=Object(n.useContext)(re),o=a.modal,r=a.toggle,c=a.handleInputChange,s=a.comment,i=a.pollID,m=a.createComment;return l.a.createElement(se.a,{isOpen:o,toggle:r},l.a.createElement("form",{className:e.root,noValidate:!0,autoComplete:"off"},l.a.createElement(ie.a,null,l.a.createElement(de.a,{theme:t},l.a.createElement("p",null,l.a.createElement(fe.a,{id:"outlined-basic",label:"Comment",name:"comment",variant:"outlined",onChange:c,value:s}))),l.a.createElement(b.a,{className:"post",id:i,type:"submit",onClick:function(e){m(e,i),r()}},"Post"))))},ve=function(e){var t=Object(n.useContext)(re),a=t.onSelectBox,o=t.updatePoll,r=t.votedPolls;return l.a.createElement("div",{className:"poll"},l.a.createElement("form",null,Array.isArray(e.value.options)&&e.value.options.map((function(t){return l.a.createElement("p",{key:t},l.a.createElement("input",{type:"radio",onClick:a,id:t,name:e.value._id,value:t}),l.a.createElement("label",{htmlFor:t},t))})),l.a.createElement("button",{disabled:!!(localStorage.getItem("polls")&&JSON.parse(localStorage.getItem("polls")).indexOf(e.value._id)>=0||r.indexOf(e.value._id)>=0),id:e.value._id,onClick:o},"Vote Now")))},be=function(){var e=Object(n.useContext)(re),t=e.polls,a=e.toggle,o=e.showPoll,r=e.showComments;e.setPoll,e.setComments;return Array.isArray(t)&&t.map((function(e){return l.a.createElement("div",{key:e._id,id:"poll-"+e._id,className:"pollCard"},l.a.createElement("div",{className:"pollCreated"},l.a.createElement("img",{className:"pollAvatar",alt:"User Avatar",src:e.user.avatar?e.user.avatar:B.a}),l.a.createElement("h5",{className:"pollUsername"},e.user.username),l.a.createElement("h6",{className:"pollTimeStamp"},oe()().diff(oe()(e.createdAt,"YYYY-MM-DDTHH:mm:ss.SSSZ"),"minutes")>60?oe()().diff(oe()(e.createdAt,"YYYY-MM-DDTHH:mm:ss.SSSZ"),"hours")>12?oe()(e.createdAt,"YYYY-MM-DDTHH:mm:ss.SSSZ").format("MM/DD/YYYY hh:mm a"):oe()().diff(oe()(e.createdAt,"YYYY-MM-DDTHH:mm:ss.SSSZ"),"hours")+" Hours ago":oe()().diff(oe()(e.createdAt,"YYYY-MM-DDTHH:mm:ss.SSSZ"),"minutes")+" Minutes ago")),l.a.createElement("div",null,l.a.createElement("img",{alt:"comments",onClick:function(){return a(e._id)},className:"pollCommentsSvg",src:te.a}),l.a.createElement(Ee,null),l.a.createElement("p",{className:"pollCommentsCount"},e.comments.length),l.a.createElement("img",{alt:"votes",className:"pollVotesSvg",src:ne.a}),l.a.createElement("p",{className:"pollVotesCount"},Object.keys(e.votes).reduce((function(t,a){return t+parseFloat(e.votes[a]||0)}),0))),l.a.createElement("div",null,l.a.createElement("h4",{className:"pollTitle"},e.headline),l.a.createElement("button",{className:"viewPoll",onClick:o},"View Poll"),l.a.createElement(ve,{value:e}),""!==e.imageLink?l.a.createElement("img",{alt:"pollImage",className:"pollImage",src:e.imageLink}):null),l.a.createElement("button",{className:"viewResults",onClick:function(){window.location="/resultspage/".concat(e.id)}},"View Results"),l.a.createElement("button",{className:"viewComments",onClick:r},"View Comments"),l.a.createElement(ce,{value:e.comments}))}))},he=y.getNewestPolls,Se=y.updateOnePoll,Ce=y.getCategories,Oe=y.createComment,ye=function(e){var t=Object(n.useState)({polls:[],selectedValue:"",searchCategory:"",comment:"",votedPolls:[],modalId:"",modal:!1,pollId:"",comments:[],poll:""}),a=Object(u.a)(t,2),o=a[0],r=a[1];return o.setPoll=function(e){r(Object(m.a)({},o,{poll:e}))},o.setComments=function(e){r(Object(m.a)({},o,{comments:e}))},o.toggle=function(e){r(Object(m.a)({},o,{modalId:e})),r(Object(m.a)({},o,{modal:!o.modal}))},o.showPoll=function(e){e.target.nextSibling.style.display="block"===e.target.nextSibling.style.display?"none":"block",console.log(e.target),e.target.textContent="View Poll"===e.target.textContent?"Hide Poll":"View Poll"},o.showComments=function(e){e.target.nextSibling.style.display="block"===e.target.nextSibling.style.display?"none":"block",console.log(e.target),e.target.textContent="View Comments"===e.target.textContent?"Hide Comments":"View Comments"},o.onSelectBox=function(e){var t=e.target;r(Object(m.a)({},o,{selectedValue:t.value})),console.log(t.value)},o.handleInputChange=function(e){r(Object(m.a)({},o,Object(i.a)({},e.target.name,e.target.value)))},o.createComment=function(e,t){e.preventDefault(),Oe({comment:o.comment,user:JSON.parse(sessionStorage.getItem("userInfo")).userId,poll:t});var a=document.createElement("div");a.classList="commentCard",a.innerHTML='\n    <div class="commentCreated">\n      <img class="commentAvatar" alt="User Avatar" src='.concat(JSON.parse(sessionStorage.getItem("userInfo")).userAvatar?JSON.parse(sessionStorage.getItem("userInfo")).userAvatar:B.a,' />\n      <h5 class="commentUsername">').concat(JSON.parse(sessionStorage.getItem("userInfo")).username,'</h5>\n      <h6 class="commentTimeStamp">0 Minutes ago</h6>\n    </div>\n    <h4 class="commentCardComment">').concat(o.comment,"</h4> "),document.querySelector("#poll-"+t+" .pollComments").prepend(a);var n=document.querySelector("#poll-"+t+" .pollCommentsCount").textContent;n++,document.querySelector("#poll-"+t+" .pollCommentsCount").textContent=n},o.updatePoll=function(e){e.preventDefault();var t=o.votedPolls;t.push(e.target.id),r(Object(m.a)({},o,{votedPolls:t}));var a="votes.".concat(o.selectedValue),n=JSON.parse(localStorage.getItem("polls"));console.log(n,e.target.id),n?n.push(e.target.id):n=[e.target.id],localStorage.setItem("polls",JSON.stringify(n)),Se(e.target.id,{$inc:Object(i.a)({},a,1)},(function(e,t){e&&console.log(e),console.log(t)}));var l=document.querySelector("#poll-"+e.target.id+" .pollVotesCount").textContent;l++,document.querySelector("#poll-"+e.target.id+" .pollVotesCount").textContent=l},o.updateSearch=function(e){console.log("in search");!function(){var t,a;A.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A.a.awrap(Ce(e));case 2:t=n.sent,a=t.data,console.log(a),r(Object(m.a)({},o,{polls:a}));case 6:case"end":return n.stop()}}))}()},Object(n.useEffect)((function(){!function(){var e,t;A.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A.a.awrap(he());case 2:e=a.sent,t=e.data,console.log(t),r(Object(m.a)({},o,{polls:t}));case 6:case"end":return a.stop()}}))}()}),[]),l.a.createElement(re.Provider,{value:o},l.a.createElement(X,{updateSearch:o.updateSearch}),l.a.createElement(be,null))},Ne=function(e){return l.a.createElement(ye,null)},ke=a(84),je=a.n(ke),we=(a(149),function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"image"},l.a.createElement("img",{src:J.a,alt:"logo"})),l.a.createElement("div",{className:"linkContainer"},l.a.createElement(c.b,{className:"links",to:"/signin"},l.a.createElement(b.a,{className:"landingBtn signInBtn",color:"primary",size:"lg",active:!0},"Sign In")),l.a.createElement(c.b,{className:"links",to:"/signup"},l.a.createElement(b.a,{className:"landingBtn signUpBtn",color:"primary",size:"lg",active:!0},"Register"))),l.a.createElement("div",{className:"image2container"},l.a.createElement("img",{className:"image2",src:je.a,alt:"hero"})))}),xe=function(e){return l.a.createElement(we,null)},Pe=Object(n.createContext)({title:"",category:"",imageLink:"",options:[],votes:[],urlId:"",handleAddOption:function(){},handleInputChange:function(){},handleChooseCategory:function(){},handleCreatePoll:function(){},handleCreateOption:function(){},handleToggleDropdown:function(){}}),Ie=a(206),Me=a(207),Ye=a(208),Ae=a(209),De=a(86),Ve=a(50),Fe=a(38),Le=(a(152),function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],o=t[1],r=function(){return o(!a)},c=Object(n.useContext)(Pe),s=c.title,i=c.category,m=c.imageLink,h=c.options,S=c.urlId,C=c.handleInputChange,O=c.handleChooseCategory,y=c.handleCreateOption,N=c.handleCreatePoll,k=c.handleRemoveOption;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,null,l.a.createElement(p.a,{noValidate:!0},l.a.createElement(g.a,{className:"jumbotron",fluid:!0},l.a.createElement(d.a,{fluid:!0},l.a.createElement("h2",{className:"colorSet"},"Create Poll"))),l.a.createElement(f.a,null,l.a.createElement(E.a,{className:"colorSet"},"Poll Title"),l.a.createElement(v.a,{name:"title",type:"title",placeholder:"ex. What is the best programming language?",onChange:C,value:s,required:!0})),l.a.createElement(f.a,null,l.a.createElement(E.a,{className:"colorSet"},"Category"),l.a.createElement(Ie.a,null,l.a.createElement(Me.a,null,l.a.createElement(b.a,{onClick:function(){return O("Sports")},className:"Sports"===i?"buttonStylesSelected":"buttonStyles"},l.a.createElement(De.a,null)),l.a.createElement(b.a,{onClick:function(){return O("Movies")},className:"Movies"===i?"buttonStylesSelected":"buttonStyles"},l.a.createElement(Ve.a,null)),l.a.createElement(b.a,{onClick:function(){return O("Food")},className:"Food"===i?"buttonStylesSelected":"buttonStyles"},l.a.createElement(Fe.b,null)),l.a.createElement(b.a,{onClick:function(){return O("Video Games")},className:"Video Games"===i?"buttonStylesSelected":"buttonStyles"},l.a.createElement(Ve.b,null)),l.a.createElement(b.a,{onClick:function(){return O("Music")},className:"Music"===i?"buttonStylesSelected":"buttonStyles"},l.a.createElement(Fe.a,null)),l.a.createElement(b.a,{onClick:function(){return O("Other")},className:"Other"===i?"buttonStylesSelected":"buttonStyles"},l.a.createElement(Fe.c,null))))),l.a.createElement(E.a,{className:"colorSet"},"Image Link"),l.a.createElement(v.a,{name:"imageLink",type:"imageLink",onChange:C,value:m,required:!0}),l.a.createElement("br",null),l.a.createElement("br",null),h.map((function(e,t){return l.a.createElement(f.a,null,l.a.createElement(E.a,{className:"colorSet"},"Option ",t+1),l.a.createElement(v.a,{name:"options","data-index":t,type:"options",onChange:C,value:e,required:!0}),t>1?l.a.createElement(b.a,{onClick:function(){return k(t)},className:"buttonStyles removeBtn"},"-"):null)})),l.a.createElement(b.a,{onClick:y,className:"buttonStyles addBtn"},"+ Add Options"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(b.a,{onClick:function(e){N(e),r()},className:"btn-lg btn-dark btn-block buttonStyles"},"Create Poll")),l.a.createElement("br",null),l.a.createElement(se.a,{isOpen:a,toggle:r},l.a.createElement(Ye.a,{toggle:r},"Poll Link"),l.a.createElement(ie.a,null,l.a.createElement(b.a,{className:"buttonStyles",onClick:function(){window.location="/pollpage/".concat(S)}},"View Poll")),l.a.createElement(Ae.a,null))))}),He=y.createPoll,Te=function(e){var t=Object(n.useState)({userInfo:sessionStorage.getItem("userInfo")||"",title:"",imageLink:"",category:"",urlId:"",options:["",""],votes:[{},{}],isDropdownOpen:!1}),a=Object(u.a)(t,2),o=a[0],r=a[1];return o.handleInputChange=function(e){var t=e.target;if("options"===t.name){var a=JSON.parse(JSON.stringify(o.options));a[t.dataset.index]=t.value,r(Object(m.a)({},o,{options:a}))}else r(Object(m.a)({},o,Object(i.a)({},t.name,t.value)))},o.handleChooseCategory=function(e){r(Object(m.a)({},o,{category:e}))},o.handleCreatePoll=function(e){e.preventDefault();for(var t={},a=0;a<o.options.length;a++)t[o.options[a]]=0;console.log(o);var n=JSON.parse(o.userInfo);console.log(n.userId),He({headline:o.title,category:o.category,options:o.options,imageLink:o.imageLink,votes:t,user:n.userId}).then((function(e){var t=e.data;console.log(t),r(Object(m.a)({},o,{urlId:t._id}))})).catch((function(e){console.log(e)}))},o.handleCreateOption=function(){var e=JSON.parse(JSON.stringify(o.options));e.push(""),r(Object(m.a)({},o,{options:e}))},o.handleToggleDropdown=function(){r(Object(m.a)({},o,{isDropdownOpen:!o.isDropdownOpen}))},o.handleRemoveOption=function(e){var t=JSON.parse(JSON.stringify(o.options));t.splice(e,1),r(Object(m.a)({},o,{options:t}))},l.a.createElement(Pe.Provider,{value:o},l.a.createElement(Q,null),l.a.createElement(Le,null))},Je=Object(n.createContext)({id:"",headline:"",category:"",imageLink:"",options:"",selectedValue:"",votes:"",onSelectBox:function(){},updatePoll:function(){},viewResults:function(){}}),Ue=a(219),Be=a(210),Re=a(211),_e=(a(153),function(){var e=Object(n.useContext)(Je),t=e.headline,a=e.category,o=e.imageLink,r=e.options,c=e.onSelectBox,s=e.updatePoll,i=e.viewResults;return l.a.createElement(d.a,null,l.a.createElement(g.a,{className:"jumbotron",fluid:!0},l.a.createElement(d.a,{fluid:!0},l.a.createElement("h2",{className:"colorSet"},a))),l.a.createElement(f.a,{className:"pollForm",tag:"fieldset"},l.a.createElement("legend",{className:"pollInput"},t),l.a.createElement("br",null),r.map((function(e,t){return l.a.createElement(f.a,null,l.a.createElement("div",null,l.a.createElement(Ue.a,{type:"radio",onClick:c,id:t,name:"radio1",value:e,label:e,className:"pollInput"})))})),l.a.createElement(Be.a,null,l.a.createElement(Re.a,{top:!0,width:"100%",src:o,alt:a})),l.a.createElement("br",null),l.a.createElement(b.a,{onClick:function(){s(),i()},className:"btn-lg btn-dark btn-block buttonStyles"},"Submit"),l.a.createElement("br",null)))}),qe=function(e){var t=Object(s.g)().urlId,a=y.updateOnePoll,o=y.getOnePoll,r=Object(n.useState)({id:"",headline:"",imageLink:"",category:"",options:[],selectedValue:"",votes:{}}),c=Object(u.a)(r,2),d=c[0],p=c[1];return d.onSelectBox=function(e){var t=e.target;p(Object(m.a)({},d,{selectedValue:t.value})),console.log(t.value)},d.updatePoll=function(){console.log(d);var e="votes.".concat(d.selectedValue);a(d.id,{$inc:Object(i.a)({},e,1)},(function(e,t){e&&console.log(e),console.log(t)}))},d.viewResults=function(){console.log(d.id),window.location="/resultspage/".concat(d.id)},Object(n.useEffect)((function(){console.log(t),console.log("Page Loading..."),o("".concat(t)).then((function(e){var t=e.data;console.log(t.poll),p({id:t.poll._id,headline:t.poll.headline,category:t.poll.category,options:t.poll.options,imageLink:t.poll.imageLink,votes:t.poll.votes})})).catch((function(e){console.log(e)}))}),[]),l.a.createElement(Je.Provider,{value:d},l.a.createElement(_e,null))},Ze=a(212),ze=a(213),Ge=a(214),$e=a(215),We=Object(n.createContext)({optionLabels:[],votes:{},pollTitle:""}),Ke=(a(154),function(){var e=Object(n.useContext)(We),t=e.optionLabels,a=e.votes,o=e.pollTitle;return l.a.createElement(d.a,null,l.a.createElement(Be.a,{className:"pollResultCard"},l.a.createElement(Ze.a,null,"Poll Results"),l.a.createElement(ze.a,null,l.a.createElement(Ge.a,null,l.a.createElement("h5",null,o)),l.a.createElement("div",null,t.map((function(e,t){return l.a.createElement(l.a.Fragment,null,console.log(a[e]),l.a.createElement("div",{key:e},l.a.createElement(E.a,null,e),l.a.createElement($e.a,{color:"white","data-index":t,value:Math.round(a[e]/Object.keys(a).reduce((function(e,t){return e+parseFloat(a[t]||0)}),0)*100)},isNaN(Math.round(a[e]/Object.keys(a).reduce((function(e,t){return e+parseFloat(a[t]||0)}),0)*100))?"":Math.round(a[e]/Object.keys(a).reduce((function(e,t){return e+parseFloat(a[t]||0)}),0)*100)+"%"),l.a.createElement("br",null)))}))),l.a.createElement(b.a,{className:"backtoExplore",onClick:function(){window.location="/explore"}},"Explore Page"))))}),Qe=function(e){var t=Object(s.g)().urlId,a=y.getOnePoll,o=Object(n.useState)({optionLabels:[],votes:{},pollTitle:""}),r=Object(u.a)(o,2),c=r[0],i=r[1];return Object(n.useEffect)((function(){a("".concat(t)).then((function(e){var a=e.data;console.log(a.poll),i({id:t,optionLabels:a.poll.options,votes:a.poll.votes,pollTitle:a.poll.headline})})).then((function(){console.log(c)})).catch((function(e){console.log(e)}))}),[]),l.a.createElement(We.Provider,{value:c},l.a.createElement(Ke,null))},Xe=(a(155),a(87)),et=function(){var e=Object(n.useContext)(We),t=e.polls,a=e.handleDeletePoll,o=Object(n.useState)(!1),r=Object(u.a)(o,2),c=r[0],s=r[1],i=Object(n.useState)(""),m=Object(u.a)(i,2),p=m[0],g=m[1],f=function(e){g(e),s(!c)};return l.a.createElement(d.a,null,t.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Be.a,{key:e._id,className:"pollResultCard"},l.a.createElement(ze.a,{className:"myPollsCard"},l.a.createElement("div",null,l.a.createElement("img",{alt:"votes",className:"pollVotesSvg",src:ne.a}),l.a.createElement("p",{className:"pollVotesCount"},Object.keys(e.votes).reduce((function(t,a){return t+parseFloat(e.votes[a]||0)}),0))),l.a.createElement(Ge.a,null,l.a.createElement("h5",null,e.headline)),l.a.createElement("div",{className:"myPollsOptions"},e.options.map((function(t,a){return l.a.createElement("div",{key:t},l.a.createElement(E.a,null,t),l.a.createElement($e.a,{color:"white","data-index":a,value:Math.round(e.votes[t]/Object.keys(e.votes).reduce((function(t,a){return t+parseFloat(e.votes[a]||0)}),0)*100)},isNaN(Math.round(e.votes[t]/Object.keys(e.votes).reduce((function(t,a){return t+parseFloat(e.votes[a]||0)}),0)*100))?"":Math.round(e.votes[t]/Object.keys(e.votes).reduce((function(t,a){return t+parseFloat(e.votes[a]||0)}),0)*100)+"%"),l.a.createElement("br",null))}))),l.a.createElement("div",{className:"myPollsButtons"},l.a.createElement(b.a,{onClick:function(){return f(window.location.origin+"/pollpage/".concat(e._id))}},"Share Poll"),l.a.createElement(b.a,{className:"deleteButton",onClick:function(){return a(e._id)}},"Delete Poll")))),l.a.createElement(se.a,{isOpen:c,toggle:f},l.a.createElement(Ye.a,{toggle:f},"Poll Link"),l.a.createElement(ie.a,null,l.a.createElement("input",{value:p}),l.a.createElement(Xe.CopyToClipboard,{text:p},l.a.createElement("button",{className:"buttonStyles"},"Copy"))),l.a.createElement(Ae.a,null)))})))},tt=(a(159),a(88)),at=(a(160),function(e){var t=y.getUserPolls,a=y.deleteOnePoll,o=Object(n.useState)({polls:[],linkValue:"",copied:!1}),r=Object(u.a)(o,2),c=r[0],s=r[1];return c.handleDeletePoll=function(e){Object(tt.confirmAlert)({title:"About to delete your Poll",message:"Are you sure you want to do this?",buttons:[{label:"Delete My Poll",onClick:function(){a(e).then((function(){return window.location.reload()})).catch((function(e){return console.error(e)}))}},{label:"No",onClick:function(){}}]})},c.copyLink=function(){},Object(n.useEffect)((function(){t(JSON.parse(sessionStorage.getItem("userInfo")).userId).then((function(e){var t=e.data;console.log(t);var a=c.polls;t.forEach((function(e){a.push(e)})),console.log(a),s(Object(m.a)({},c,{polls:a}))})).then((function(){console.log(c)})).catch((function(e){console.log(e)}))}),[]),l.a.createElement(We.Provider,{value:c},l.a.createElement("div",{className:"menuContainer"},l.a.createElement(Q,null)),l.a.createElement("h2",{className:"myPollsH2"},"My Polls"),l.a.createElement(et,null))}),nt=y.authorize,lt=function(){var e=!!sessionStorage.getItem("userInfo")&&nt(JSON.parse(sessionStorage.getItem("userInfo")).token);return l.a.createElement(c.a,null,l.a.createElement(s.d,null,l.a.createElement(s.b,{exact:!0,path:"/"},l.a.createElement(xe,null)),l.a.createElement(s.b,{exact:!0,path:"/signup"},l.a.createElement(M,null)),l.a.createElement(s.b,{exact:!0,path:"/signin"},l.a.createElement(j,null)),l.a.createElement(s.b,{exact:!0,path:"/pollpage/:urlId"},l.a.createElement(qe,null)),l.a.createElement(s.b,{exact:!0,path:"/resultspage/:urlId"},l.a.createElement(Qe,null)),e?l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,{exact:!0,path:"/explore"},l.a.createElement(Ne,null)),l.a.createElement(s.b,{exact:!0,path:"/createpoll"},l.a.createElement(Te,null)),l.a.createElement(s.b,{exact:!0,path:"/mypolls"},l.a.createElement(at,null))):l.a.createElement(s.a,{to:"/signin"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(161);r.a.render(l.a.createElement(lt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},29:function(e,t,a){e.exports=a.p+"static/media/Avatar.5d41767b.svg"},44:function(e,t,a){e.exports=a.p+"static/media/logo.39db00a2.svg"},49:function(e,t,a){e.exports=a.p+"static/media/votes.d5316b45.svg"},51:function(e,t,a){e.exports=a.p+"static/media/Right-Chevron.224439c8.svg"},76:function(e,t,a){e.exports=a.p+"static/media/compass.a159688d.svg"},77:function(e,t,a){e.exports=a.p+"static/media/Poll.1e6f5c27.svg"},78:function(e,t,a){e.exports=a.p+"static/media/Create.9fdca756.svg"},82:function(e,t,a){e.exports=a.p+"static/media/comments.0d6f309b.svg"},84:function(e,t,a){e.exports=a.p+"static/media/mock.f03f8224.png"},94:function(e,t,a){e.exports=a(162)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.6dbb786f.chunk.js.map